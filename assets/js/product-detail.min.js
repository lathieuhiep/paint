!function(r){let s=r("body");r(document).ready(function(){var o,e=r(".slider-product-galleries"),t=r(".slider-product-gallery-nav");e.length&&(e.slick({slidesToShow:1,slidesToScroll:1,arrows:!1,asNavFor:".slider-product-gallery-nav"}),o=e.find(".slick-slide").not(".slick-cloned").find("a"),e.magnificPopup({delegate:o,type:"image",gallery:{enabled:!0}})),t.length&&t.slick({slidesToShow:5,slidesToScroll:1,arrows:!1,asNavFor:".slider-product-galleries",dots:!1,centerMode:!1,focusOnSelect:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3}}]});let n=parseInt(r(".site-single-product").data("product-id"));r(".tabs-warp .nav-link").on("shown.bs.tab",function(o){let t=r(this),s=r(o.target),a=s.attr("id");t.hasClass("success-loading")||r.ajax({url:productDetailAjax.url,type:"POST",data:{action:"paint_get_tab_product_detail",idTab:a,idProduct:n},beforeSend:function(){r(".spinner-warp").removeClass("d-none")},success:function(e){if(e){if(r("."+a).append(e),"gallery-tab"===a)if(!s.hasClass("success-masonry")){e=r(".product-gallery-grid");if(e.length){let o=e.masonry({percentPosition:!0,horizontalOrder:!0,columnWidth:".grid-sizer-normal",itemSelector:".item"});o.imagesLoaded().progress(function(){o.masonry("layout")})}s.addClass("success-masonry")}t.addClass("success-loading")}},complete:function(){r(".spinner-warp").addClass("d-none")}})}),r(".item-pattern").on("click",function(){let e,t=r(this);var s=t.data("id");let a=t.data("stt");var o=t.hasClass("active");let n=r(".spinner-box"),i=r(".group-color");if(!o){e=!0,t.closest(".pattern__posts").find(".item-pattern").removeClass("active"),t.addClass("active");let o=r(".color-code-load");r.ajax({url:productDetailAjax.url,type:"POST",data:{action:"paint_get_color_code",postId:s},beforeSend:function(){i.empty(),n.removeClass("d-none")},success:function(o){t.closest(".pattern").find(".pattern__style .stt").text(a),i.append(o),n.addClass("d-none")},complete:function(){o.addClass("more-data")}})}}),s.on("click",".product-color .item",function(){let o,t=r(this);var s=t.index(),e=t.outerWidth(!0),a=t.parent().width(),a=Math.floor(a/e),e=Math.floor(s/a);let n=t.parent().children().slice(e*a,(e+1)*a);e=t.hasClass("active");let i=t.closest(".group-color__grid");a=i.data("color-code-id");if(!e){o=!0;let e=t.find(".spinner-load-color");i.find(".item").removeClass("active"),r.ajax({url:productDetailAjax.url,type:"POST",data:{action:"paint_get_color_code_standard",idColorCode:a,key:s},beforeSend:function(){t.append('<div class="spinner-load-color">\n<div class="spinner-border text-warning" role="status">\n<span class="visually-hidden">Loading...</span>\n</div>\n</div>'),e.removeClass("d-none");var o=i.find(".box-full-color");o.length&&o.slideUp(500,function(){r(this).remove()})},success:function(o){n.last().after(o),e.addClass("d-none")},complete:function(){t.addClass("active"),t.find(".spinner-load-color").remove(),i.find(".box-full-color").slideDown(500,function(){r("html, body").animate({scrollTop:i.find(".box-full-color").offset().top-r(".site-header").outerHeight()-50},400)}),r(".image-container").each(function(){var o=r(this);let s=o.find("img"),a=o.find(".zoom-overlay");var e=a.data("zoom-src");a.css("background-image",`url(${e})`),o.off("mousemove.zoom mouseenter.zoom mouseleave.zoom"),o.on("mousemove.zoom",function(o){var e=s[0].getBoundingClientRect(),t=o.clientX-e.left,o=o.clientY-e.top,e=-(2*t-a.width()/2),t=-(2*o-a.height()/2);a.css("background-position",e+`px ${t}px`)}),o.on("mouseenter.zoom",function(){s.css("opacity","0"),a.css("opacity","1")}),o.on("mouseleave.zoom",function(){s.css("opacity","1"),a.css("opacity","0"),a.css("background-position","center")})})}})}}),s.on("click",".close-full-color",function(){r(this).closest(".box-full-color").slideUp(500,function(){r(this).remove(),r(".group-color__grid").find(".item").removeClass("active")})});r(".image-container").each(function(){var o=r(this);let s=o.find("img"),a=o.find(".zoom-overlay");var e=a.data("zoom-src");a.css("background-image",`url(${e})`),o.on("mousemove",function(o){var e=s[0].getBoundingClientRect(),t=o.clientX-e.left,o=o.clientY-e.top,e=-(2*t-a.width()/2),t=-(2*o-a.height()/2);a.css("background-position",e+`px ${t}px`)}),o.on("mouseenter",function(){s.css("opacity","0"),a.css("opacity","1")}),o.on("mouseleave",function(){s.css("opacity","1"),a.css("opacity","0"),a.css("background-position","center")})});e=r(".related-product__grid");e.length&&e.slick({slidesToShow:4,slidesToScroll:1,dots:!1,centerMode:!1,focusOnSelect:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]});let a=r(".group-color__grid"),i=a.data("items-per"),l=!1,c=i;r(window).on("scroll",function(){if(r("#color-code").hasClass("active")){var o=a.data("color-code-id");console.log(o);let s=r(".color-code-load");s.hasClass("more-data")&&s.offset().top+110<r(window).scrollTop()+r(window).height()&&!l&&(l=!0,r.ajax({url:productDetailAjax.url,type:"POST",data:{action:"paint_get_product_color_ajax",colorCodeId:o,offset:c,itemsPerLoad:i},beforeSend:function(){s.find(".box-load").fadeIn()},success:function(o){try{var e,t=JSON.parse(o);t.html?((e=r(t.html)).each(function(o){r(this).addClass("slide-up").css({"animation-delay":.2*o+"s",opacity:0})}),a.append(e),c+=i):s.removeClass("more-data")}catch(o){console.error("Invalid JSON response:",o)}},complete:function(){l=!1,s.find(".box-load").fadeOut()}}))}})})}(jQuery),document.addEventListener("DOMContentLoaded",o=>{var e=document.getElementById("content-product-detail");let t=new SimpleBar(e,{autoHide:!1,forceVisible:"y"});e.classList.add("simplebar-active"),new ResizeObserver(()=>{t.recalculate()}).observe(e)});